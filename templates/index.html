<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TYPING SPEED TEST</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div id="intro">
    <div class="intro-content">
        <h1 class="animated-text">TypeQuest</h1>
        <p style="font-size:24px;margin-top:20px;">Click anywhere to start</p>
    </div>
</div>

<div id="about-screen" style="display:none;">
    <div class="about-container">
        <h1>About Our Website</h1>
        <p class="about-text">
            Welcome to TypeQuest!<br><br>
            Built using Flask (Python), TypeQuest is a typing speed test website that helps users test and improve their typing speed. This website combines gradients and animations to make typing practice fun and engaging.<br><br>
            Features:<br>
          1.Typing Speed Test: Measure your typing speed in words per minute (WPM) and get an accuracy percentage to track your improvement.<br>
          2.Dynamic Paragraphs: Each test provides random paragraphs to ensure varied practice.<br>
          3.Timer-Based Challenge: Complete tests within a set time(30 seconds) to challenge your speed and consistency.<br>
          4.Retry Option: Easily try another paragraph to practice again and improve your score.<br>
        </p>

        <button id="startTestBtn">Start Typing Test</button>

        <div class="creator-section">
            <h2>âœ¨Meet the Creatorsâœ¨</h2>
            <p>
                <strong>Anupama Bharti</strong>- a BTech CSE-AI student<br><br>
                <strong>Deshna Jain</strong>- a BTech CSE-AI student<br><br>
            </p>
        </div>
    </div>
</div>
<div class="container" id="typing-container" style="display:none;">
    <h1>Typing Test</h1>
    <p id="paragraph">{{ paragraph }}</p>

    <form method="POST">
        <textarea id="typed_text" name="typed_text" rows="6" cols="80" placeholder="Start typing here..." disabled>{{ typed_text }}</textarea>
        <input type="hidden" name="start_time" id="start_time" value="{{ start_time }}">
        <div class="buttons-container">
            <button type="button" id="startBtn">Start Test</button>
            <button type="button" onclick="window.location.href='/try-again'">Try Again</button>
        </div>
    </form>

    <p>Time: <span id="timer">30</span> seconds</p>

    {% if result is not none %}
    <h2>Results:</h2>
    <p class="results-text">Typing Speed: {{ result or 0 }} WPM</p>
    <p class="results-text">Accuracy: {{ accuracy }}%</p>
    {% endif %}
</div>

<script>
    const intro = document.getElementById('intro');
    const aboutScreen = document.getElementById('about-screen');
    const typingContainer = document.getElementById('typing-container');
    const startTestBtn = document.getElementById('startTestBtn');

    // 1ï¸âƒ£ Intro click -> About screen
    intro.addEventListener('click', () => {
        intro.style.display = 'none';
        aboutScreen.style.display = 'flex';
        document.body.classList.add('about-active');
    });

    // 2ï¸âƒ£ About screen button -> Typing test
    startTestBtn.addEventListener('click', () => {
        aboutScreen.style.display = 'none';
        typingContainer.style.display = 'block';
        document.body.classList.add('typing-active');
    });

    // ðŸ•’ Timer + test logic
    let timerElement = document.getElementById('timer');
    let typedArea = document.getElementById('typed_text');
    let startBtn = document.getElementById('startBtn');
    let startTimeInput = document.getElementById('start_time');
    let timeLeft = 30;
    let interval;

    startBtn.onclick = function() {
        typedArea.disabled = false;
        typedArea.focus();
        startBtn.disabled = true;
        startTimeInput.value = Date.now() / 1000;
        interval = setInterval(() => {
            timeLeft--;
            timerElement.innerText = timeLeft;
            if (timeLeft <= 0) {
                clearInterval(interval);
                typedArea.form.submit();
            }
        }, 1000);
    };
</script>

</body>
</html>
