<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Typing Speed Test</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script>
        let startTime;
        let timerInterval;

        function startTyping() {
            startTime = new Date().getTime() / 1000;
            document.getElementById('start_time').value = startTime;
            let seconds = 0;
            timerInterval = setInterval(() => {
                seconds++;
                document.getElementById('timer').innerText = `Time: ${seconds}s`;
            }, 1000);
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>Typing Speed Test</h1>
        <p id="timer">Time: 0s</p>
        <p id="para">{{ paragraph }}</p>

        {% if not done %}
        <form method="POST" onsubmit="return confirm('Are you sure you want to submit?')">
            <textarea name="typed_text" rows="5" cols="60" placeholder="Start typing here..." onfocus="startTyping()" required></textarea>
            <input type="hidden" name="start_time" id="start_time">
            <button type="submit">Check Speed</button>
        </form>
        {% else %}
        <div class="result">
            <h2>Results</h2>
            <p><b>Speed:</b> {{ speed }} WPM</p>
            <p><b>Accuracy:</b> {{ accuracy }}%</p>
            <a href="/">Try Again</a>
        </div>
        {% endif %}
    </div>
</body>
</html>
